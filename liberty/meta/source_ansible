DIR=$(git rev-parse --show-toplevel)/liberty/meta
if [[ -e ${DIR}/tmp/bin/activate ]]; then
    source ${DIR}/tmp/bin/activate
else
    sudo apt-get update
    sudo apt-get install -y \
         software-properties-common \
         python-dev \
         python-pip

    sudo pip install gsutil
    sudo pip install virtualenv
    echo "Creating work directory ${PWD}/tmp"
    mkdir -p ${DIR}/tmp
    virtualenv ${DIR}/tmp
    source ${DIR}/tmp/bin/activate
    pip install paramiko PyYAML Jinja2 httplib2
    pip install ansible==1.9.2
    echo "Successfully installed ansible!"
    echo "Be sure to play the devbox_cpp_libs.yml role"
    echo "i.e: ansible-playbook -i hosts -K playbooks/devbox_all.yml"
fi
